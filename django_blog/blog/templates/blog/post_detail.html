{% extends "blog/base.html" %}

{% block content %}
  <h1>{{ post.title }}</h1>
  <p>{{ post.content }}</p>
  <hr>

  <h3>التعليقات:</h3>
  {% for comment in comments %}
    <div style="margin-bottom: 10px;">
      <strong>{{ comment.author.username }}</strong> - {{ comment.created_at|date:"Y-m-d H:i" }}
      <p>{{ comment.content }}</p>
    </div>
  {% empty %}
    <p>لا توجد تعليقات بعد.</p>
  {% endfor %}

  <hr>
  <h3>إضافة تعليق جديد</h3>
  {% if user.is_authenticated %}
    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" class="btn btn-primary">إرسال</button>
    </form>
  {% else %}
    <p>الرجاء <a href="{% url 'login' %}">تسجيل الدخول</a> لإضافة تعليق.</p>
  {% endif %}
{% endblock %}
{% for comment in comments %}
  <div style="margin-bottom: 10px;">
    <strong>{{ comment.author.username }}</strong> - {{ comment.created_at|date:"Y-m-d H:i" }}
    <p>{{ comment.content }}</p>

    {% if comment.author == user or user.is_superuser %}
      <a href="{% url 'edit_comment' comment.pk %}">تعديل</a> |
      <a href="{% url 'delete_comment' comment.pk %}">حذف</a>
    {% endif %}
  </div>
{% empty %}
  <p>لا توجد تعليقات بعد.</p>
{% endfor %}